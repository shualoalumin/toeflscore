<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title style="text-align: center;">Fall2024 TOEFL Review</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background-color: #1a1a1a;
            color: #e0e0e0;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        th, td {
            border: 1px solid #404040;
            padding: 8px;
            text-align: center;
        }
        th {
            background-color: #2c2c2c;
            font-weight: bold;
        }
        tr:nth-child(even) {
            background-color: transparent;
        }
        tr:hover {
            background-color: #2a2a2a;
        }
        #grade-averages {
            display: none;
            margin-top: 20px;
            border: 1px solid #404040;
            padding: 15px;
            background-color: #1a1a1a;
        }
        #toggle-averages {
            background-color: #45a049;
            color: white;
            border: none;   
            padding: 10px 20px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
            margin: 10px 0;
            cursor: pointer;
            border-radius: 5px;
        }
        #toggle-averages:hover {
            background-color: #3d8b40;
        }
        td:last-child {
            background-color: #2c2c2c;
        }
        th:last-child {
            background-color: #2c2c2c;
        }
        .filter-section {
            margin: 20px 0;
            padding: 15px;
            background-color: #2c2c2c;
            border-radius: 5px;
        }
        
        .filter-section select, .filter-section input {
            padding: 8px;
            margin: 5px;
            background-color: #333;
            color: #e0e0e0;
            border: 1px solid #404040;
            border-radius: 4px;
        }
        
        .stats-table {
            margin-top: 20px;
        }
        
        .sort-header {
            cursor: pointer;
        }
        
        .sort-header:hover {
            background-color: #3c3c3c;
        }
        a:hover {
            background-color: #3d8b40;
        }
    </style>
</head>
<body>
    <h1>Fall2024 TOEFL Review</h1>
    <div style="background-color: #2c2c2c; padding: 15px; border-radius: 5px; margin-bottom: 20px;">
        <p style="margin: 5px 0;"><strong>응시일:</strong> 12월 16일(월),17일(화)</p>
        <p style="margin: 5px 0;"><strong>대상:</strong> G7~G10</p>
        <p style="margin: 5px 0;"><strong>응시자:</strong> 38명</p>
        <p style="margin: 5px 0;"><strong>미응시:</strong> 1명, 최여은(9학년)</p>
        <div style="margin-top: 15px;">
            <a href="TOEFL_COMPARE.html" 
               style="display: inline-block; 
                      padding: 10px 20px; 
                      background-color: #45a049; 
                      color: white; 
                      text-decoration: none; 
                      border-radius: 4px;
                      transition: background-color 0.3s;">
                통계 보기
            </a>
        </div>
    </div>
    
    <table>
        <colgroup>
            <col style="width: 7%">  <!-- 학년 -->
            <col style="width: 12%"> <!-- 이름 -->
            <col style="width: 13%"> <!-- R -->
            <col style="width: 13%"> <!-- L -->
            <col style="width: 13%"> <!-- S -->
            <col style="width: 13%"> <!-- W -->
            <col style="width: 15%"> <!-- TOTAL -->
        </colgroup>
        <thead>
            <tr>
                <th>학년</th>
                <th>이름</th>
                <th>R</th>
                <th>L</th>
                <th>S</th>
                <th>W</th>
                <th>TOTAL</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>7</td>
                <td>이온유</td>
                <td>5</td>
                <td>7</td>
                <td>15</td>
                <td>8</td>
                <td>35</td>
            </tr>
            <tr>
                <td>7</td>
                <td>박지용</td>
                <td>10</td>
                <td>27</td>
                <td>14</td>
                <td>11</td>
                <td>62</td>
            </tr>
            <tr>
                <td>7</td>
                <td>이아인</td>
                <td>16</td>
                <td>11</td>
                <td>15</td>
                <td>14</td>
                <td>56</td>
            </tr>
            <tr>
                <td>7</td>
                <td>윤수아</td>
                <td>0</td>
                <td>18</td>
                <td>15</td>
                <td>11</td>
                <td>44</td>
            </tr>
            <tr>
                <td>7</td>
                <td>우태웅</td>
                <td>3</td>
                <td>2</td>
                <td>11</td>
                <td>11</td>
                <td>27</td>
            </tr>
            <tr>
                <td>7</td>
                <td>백시안</td>
                <td>10</td>
                <td>9</td>
                <td>12</td>
                <td>14</td>
                <td>45</td>
            </tr>
            <tr>
                <td>7</td>
                <td>우도형</td>
                <td>1</td>
                <td>11</td>
                <td>13</td>
                <td>11</td>
                <td>36</td>
            </tr>
            <tr>
                <td>7</td>
                <td>김주원</td>
                <td>16</td>
                <td>28</td>
                <td>22</td>
                <td>20</td>
                <td>86</td>
            </tr>
            <tr>
                <td>7</td>
                <td>나하린</td>
                <td>8</td>
                <td>6</td>
                <td>0</td>
                <td>11</td>
                <td>25</td>
            </tr>
            <tr>
                <td>7</td>
                <td>위여디디야</td>
                <td>3</td>
                <td>4</td>
                <td>0</td>
                <td>채점중</td>
                <td>채점중</td>
            </tr>
            <!-- 8학년 데이터를 모두 함께 묶기 -->
            <tr>
                <td>8</td>
                <td>김다원</td>
                <td>20</td>
                <td>15</td>
                <td>18</td>
                <td>14</td>
                <td>67</td>
            </tr>
            <tr>
                <td>8</td>
                <td>이서진</td>
                <td>3</td>
                <td>6</td>
                <td>22</td>
                <td>14</td>
                <td>45</td>
            </tr>
            <tr>
                <td>8</td>
                <td>이우림</td>
                <td>1</td>
                <td>4</td>
                <td>14</td>
                <td>17</td>
                <td>36</td>
            </tr>
            <tr>
                <td>8</td>
                <td>이강현</td>
                <td>16</td>
                <td>11</td>
                <td>16</td>
                <td>14</td>
                <td>57</td>
            </tr>
            <tr>
                <td>8</td>
                <td>신나라</td>
                <td>5</td>
                <td>7</td>
                <td>9</td>
                <td>14</td>
                <td>35</td>
            </tr>
            <tr>
                <td>8</td>
                <td>박선경</td>
                <td>8</td>
                <td>9</td>
                <td>16</td>
                <td>14</td>
                <td>47</td>
            </tr>
            <tr>
                <td>8</td>
                <td>송주안</td>
                <td>8</td>
                <td>7</td>
                <td>9</td>
                <td>17</td>
                <td>41</td>
            </tr>
            <tr>
                <td>8</td>
                <td>이서현</td>
                <td>0</td>
                <td>4</td>
                <td>13</td>
                <td>17</td>
                <td>34</td>
            </tr>
            <tr>
                <td>8</td>
                <td>이은성</td>
                <td>0</td>
                <td>1</td>
                <td>17</td>
                <td>14</td>
                <td>32</td>
            </tr>
            <!-- 9학년 데이터 -->
            <tr>
                <td>9</td>
                <td>이시온</td>
                <td>14</td>
                <td>17</td>
                <td>19</td>
                <td>17</td>
                <td>67</td>
            </tr>
            <tr>
                <td>9</td>
                <td>강찬영</td>
                <td>28</td>
                <td>27</td>
                <td>22</td>
                <td>25</td>
                <td>102</td>
            </tr>
            <tr>
                <td>9</td>
                <td>정시온</td>
                <td>25</td>
                <td>29</td>
                <td>22</td>
                <td>17</td>
                <td>93</td>
            </tr>
            <tr>
                <td>9</td>
                <td>박건민</td>
                <td>10</td>
                <td>18</td>
                <td>18</td>
                <td>20</td>
                <td>66</td>
            </tr>
            <tr>
                <td>9</td>
                <td>조하은</td>
                <td>25</td>
                <td>21</td>
                <td>18</td>
                <td>22</td>
                <td>86</td>
            </tr>
            <tr>
                <td>9</td>
                <td>김예준</td>
                <td>3</td>
                <td>1</td>
                <td>17</td>
                <td>14</td>
                <td>35</td>
            </tr>
            <tr>
                <td>9</td>
                <td>이강인</td>
                <td>1</td>
                <td>7</td>
                <td>16</td>
                <td>14</td>
                <td>38</td>
            </tr>
            <tr>
                <td>9</td>
                <td>정도현</td>
                <td>8</td>
                <td>6</td>
                <td>17</td>
                <td>17</td>
                <td>48</td>
            </tr>
            <tr>
                <td>9</td>
                <td>김민지</td>
                <td>8</td>
                <td>11</td>
                <td>14</td>
                <td>17</td>
                <td>50</td>
            </tr>
            <tr>
                <td>9</td>
                <td>백나빈</td>
                <td>20</td>
                <td>23</td>
                <td>23</td>
                <td>22</td>
                <td>88</td>
            </tr>
            <tr>
                <td>9</td>
                <td>이예환</td>
                <td>21</td>
                <td>16</td>
                <td>19</td>
                <td>22</td>
                <td>78</td>
            </tr>
            <tr>
                <td>9</td>
                <td>최주안</td>
                <td>20</td>
                <td>9</td>
                <td>22</td>
                <td>20</td>
                <td>71</td>
            </tr>
            <tr>
                <td>9</td>
                <td>김도현</td>
                <td>3</td>
                <td>4</td>
                <td>15</td>
                <td>17</td>
                <td>39</td>
            </tr>

            <!-- 10학년 데이터 -->
            <tr>
                <td>10</td>
                <td>최효주</td>
                <td>10</td>
                <td>16</td>
                <td>18</td>
                <td>17</td>
                <td>61</td>
            </tr>
            <tr>
                <td>10</td>
                <td>김효인</td>
                <td>20</td>
                <td>25</td>
                <td>19</td>
                <td>22</td>
                <td>86</td>
            </tr>
            <tr>
                <td>10</td>
                <td>황준서</td>
                <td>1</td>
                <td>6</td>
                <td>16</td>
                <td>14</td>
                <td>37</td>
            </tr>
            <tr>
                <td>10</td>
                <td>구준모</td>
                <td>21</td>
                <td>15</td>
                <td>14</td>
                <td>20</td>
                <td>70</td>
            </tr>
            <tr>
                <td>10</td>
                <td>최주원</td>
                <td>8</td>
                <td>6</td>
                <td>18</td>
                <td>14</td>
                <td>46</td>
            </tr>
            <tr>
                <td>10</td>
                <td>오윤</td>
                <td>3</td>
                <td>7</td>
                <td>22</td>
                <td>14</td>
                <td>46</td>
            </tr>
        </tbody>
    </table>

    <script>
        const students = [
            {학년: 7, 이름: '이온유', R: 5, L: 7, S: 15, W: 8, TOTAL: 35},
            {학년: 7, 이름: '박지용', R: 10, L: 27, S: 14, W: 11, TOTAL: 62},
            {학년: 7, 이름: '이아인', R: 16, L: 11, S: 15, W: 14, TOTAL: 56},
            {학년: 7, 이름: '윤수아', R: 0, L: 18, S: 15, W: 11, TOTAL: 44},
            {학년: 7, 이름: '우태웅', R: 3, L: 2, S: 11, W: 11, TOTAL: 27},
            {학년: 7, 이름: '백시안', R: 10, L: 9, S: 12, W: 14, TOTAL: 45},
            {학년: 7, 이름: '우도형', R: 1, L: 11, S: 13, W: 11, TOTAL: 36},
            {학년: 7, 이름: '김주원', R: 16, L: 28, S: 22, W: 20, TOTAL: 86},
            {학년: 7, 이름: '나하린', R: 8, L: 6, S: 0, W: 11, TOTAL: 25},
            {학년: 8, 이름: '김다원', R: 20, L: 15, S: 18, W: 14, TOTAL: 67},
            {학년: 8, 이름: '이서진', R: 3, L: 6, S: 22, W: 14, TOTAL: 45},
            {학년: 8, 이름: '이우림', R: 1, L: 4, S: 14, W: 17, TOTAL: 36},
            {학년: 8, 이름: '이강현', R: 16, L: 11, S: 16, W: 14, TOTAL: 57},
            {학년: 8, 이름: '신나라', R: 5, L: 7, S: 9, W: 14, TOTAL: 35},
            {학년: 9, 이름: '이시온', R: 14, L: 17, S: 19, W: 17, TOTAL: 67},
            {학년: 9, 이름: '강찬영', R: 28, L: 27, S: 22, W: 25, TOTAL: 102},
            {학년: 9, 이름: '정시온', R: 25, L: 29, S: 22, W: 17, TOTAL: 93},
            {학년: 9, 이름: '박건민', R: 10, L: 18, S: 18, W: 20, TOTAL: 66},
            {학년: 9, 이름: '조하은', R: 25, L: 21, S: 18, W: 22, TOTAL: 86},
            {학년: 9, 이름: '김예준', R: 3, L: 1, S: 17, W: 14, TOTAL: 35},
            {학년: 9, 이름: '이강인', R: 1, L: 7, S: 16, W: 14, TOTAL: 38},
            {학년: 9, 이름: '정도현', R: 8, L: 6, S: 17, W: 17, TOTAL: 48},
            {학년: 9, 이름: '김민지', R: 8, L: 11, S: 14, W: 17, TOTAL: 50},
            {학년: 9, 이름: '백나빈', R: 20, L: 23, S: 23, W: 22, TOTAL: 88},
            {학년: 9, 이름: '이예환', R: 21, L: 16, S: 19, W: 22, TOTAL: 78},
            {학년: 9, 이름: '최주안', R: 20, L: 9, S: 22, W: 20, TOTAL: 71},
            {학년: 9, 이름: '김도현', R: 3, L: 4, S: 15, W: 17, TOTAL: 39},
            {학년: 10, 이름: '최효주', R: 10, L: 16, S: 18, W: 17, TOTAL: 61},
            {학년: 10, 이름: '김효인', R: 20, L: 25, S: 19, W: 22, TOTAL: 86},
            {학년: 10, 이름: '황준서', R: 1, L: 6, S: 16, W: 14, TOTAL: 37},
            {학년: 10, 이름: '구준모', R: 21, L: 15, S: 14, W: 20, TOTAL: 70},
            {학년: 10, 이름: '최주원', R: 8, L: 6, S: 18, W: 14, TOTAL: 46},
            {학년: 10, 이름: '오윤', R: 3, L: 7, S: 22, W: 14, TOTAL: 46},
        ];

        document.addEventListener('DOMContentLoaded', function() {
            const tableBody = document.querySelector('tbody');
            const statsBody = document.getElementById('stats-body');
            
            // Sort functionality
            document.querySelectorAll('th').forEach(header => {
                header.classList.add('sort-header');
                header.addEventListener('click', () => {
                    const column = header.textContent;
                    sortTable(column);
                });
            });

            function sortTable(column) {
                const sortedStudents = [...students].sort((a, b) => {
                    if (column === '학년') return a[column] - b[column];
                    if (column === '이름') return a[column].localeCompare(b[column]);
                    return b[column] - a[column];
                });
                renderTable(sortedStudents);
            }

            // Statistics calculation
            function calculateStats(data, field) {
                const values = data.map(s => s[field]).filter(v => !isNaN(v));
                const avg = values.reduce((a, b) => a + b, 0) / values.length;
                const variance = values.reduce((a, b) => a + Math.pow(b - avg, 2), 0) / values.length;
                const stdDev = Math.sqrt(variance);
                
                return {
                    average: avg.toFixed(1),
                    variance: variance.toFixed(1),
                    stdDev: stdDev.toFixed(1),
                    count: values.length
                };
            }

            function updateStats(data) {
                const grades = [...new Set(data.map(s => s.학년))].sort((a, b) => a - b);
                let statsHTML = '';
                
                grades.forEach(grade => {
                    const gradeData = data.filter(s => s.학년 === grade);
                    const fields = ['R', 'L', 'S', 'W', 'TOTAL'];
                    
                    // Add average row
                    const averages = fields.map(field => calculateStats(gradeData, field).average);
                    statsHTML += `
                        <tr>
                            <td rowspan="2">${grade}</td>
                            <td>평균</td>
                            ${averages.map(v => `<td>${v}</td>`).join('')}
                            <td rowspan="2">${gradeData.length}</td>
                        </tr>
                    `;
                    
                    // Add standard deviation row
                    const stdDevs = fields.map(field => calculateStats(gradeData, field).stdDev);
                    statsHTML += `
                        <tr>
                            <td>표준편차</td>
                            ${stdDevs.map(v => `<td>${v}</td>`).join('')}
                        </tr>
                    `;
                });
                
                statsBody.innerHTML = statsHTML;
            }

            // Initial render with all data
            updateStats(students);
        });
    </script>
</body>
</html>